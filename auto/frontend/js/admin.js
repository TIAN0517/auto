// ÁÆ°ÁêÜÂæåÂè∞JavaScript - 4DÁßëÊäÄÈ¢®Ê†ºËá™ÂãïË¥äÂä©Á≥ªÁµ±
// Admin Dashboard Module

// ÁÆ°ÁêÜÂæåÂè∞ÈÖçÁΩÆ
const AdminConfig = {
    REFRESH_INTERVAL: 30000, // 30ÁßíÂà∑Êñ∞‰∏ÄÊ¨°
    CHART_COLORS: {
        primary: '#00d4ff',
        secondary: '#ff6b6b',
        success: '#51cf66',
        warning: '#ffd43b',
        danger: '#ff6b6b',
        info: '#74c0fc'
    },
    PAGINATION: {
        DEFAULT_PAGE_SIZE: 20,
        MAX_PAGE_SIZE: 100
    },
    EXPORT_FORMATS: ['csv', 'excel', 'pdf'],
    NOTIFICATION_TYPES: {
        SUCCESS: 'success',
        ERROR: 'error',
        WARNING: 'warning',
        INFO: 'info'
    }
};

// ÁÆ°ÁêÜÂæåÂè∞‰∏ªÈ°û
class AdminDashboard {
    constructor() {
        this.currentView = 'dashboard';
        this.charts = {};
        this.filters = {
            dateRange: 'today',
            status: 'all',
            method: 'all',
            page: 1,
            pageSize: AdminConfig.PAGINATION.DEFAULT_PAGE_SIZE
        };
        this.refreshTimer = null;
        this.init();
    }

    init() {
        this.setupEventHandlers();
        this.initializeCharts();
        this.loadDashboardData();
        this.startAutoRefresh();
        console.log('üéõÔ∏è ÁÆ°ÁêÜÂæåÂè∞Â∑≤ÂàùÂßãÂåñ');
    }

    // Ë®≠ÁΩÆ‰∫ã‰ª∂ËôïÁêÜÂô®
    setupEventHandlers() {
        // ÂÅ¥ÈÇäÊ¨ÑÂ∞éËà™
        document.querySelectorAll('.sidebar-nav a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const view = e.target.closest('a').dataset.view;
                this.switchView(view);
            });
        });

        // ÈÅéÊøæÂô®ËÆäÊõ¥
        document.querySelectorAll('.filter-select').forEach(select => {
            select.addEventListener('change', (e) => {
                this.updateFilter(e.target.name, e.target.value);
            });
        });

        // ÊêúÁ¥¢ÂäüËÉΩ
        const searchInput = document.querySelector('.search-input');
        if (searchInput) {
            searchInput.addEventListener('input', this.debounce((e) => {
                this.performSearch(e.target.value);
            }, 500));
        }

        // Âà∑Êñ∞ÊåâÈàï
        document.querySelectorAll('.refresh-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                this.refreshCurrentView();
            });
        });

        // Â∞éÂá∫ÊåâÈàï
        document.querySelectorAll('.export-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const format = e.target.dataset.format;
                this.exportData(format);
            });
        });

        // ÊâπÈáèÊìç‰Ωú
        document.addEventListener('change', (e) => {
            if (e.target.classList.contains('batch-checkbox')) {
                this.updateBatchSelection();
            }
        });

        // Ê®°ÊÖãÊ°Ü‰∫ã‰ª∂
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-close') || 
                e.target.classList.contains('modal-overlay')) {
                this.closeModal();
            }
        });

        // WebSocket‰∫ã‰ª∂Áõ£ËÅΩ
        if (window.JyWebSocket && window.JyWebSocket.manager()) {
            const wsManager = window.JyWebSocket.manager();
            wsManager.on('transaction_update', (data) => {
                this.handleTransactionUpdate(data);
            });
            wsManager.on('system_notification', (data) => {
                this.handleSystemNotification(data);
            });
        }
    }

    // ÂàáÊèõË¶ñÂúñ
    switchView(view) {
        if (this.currentView === view) return;

        // Êõ¥Êñ∞ÂÅ¥ÈÇäÊ¨ÑÁãÄÊÖã
        document.querySelectorAll('.sidebar-nav a').forEach(link => {
            link.classList.remove('active');
        });
        document.querySelector(`[data-view="${view}"]`).classList.add('active');

        // Èö±ËóèÊâÄÊúâÂÖßÂÆπÂçÄÂüü
        document.querySelectorAll('.content-section').forEach(section => {
            section.style.display = 'none';
        });

        // È°ØÁ§∫ÁõÆÊ®ôÂÖßÂÆπÂçÄÂüü
        const targetSection = document.querySelector(`#${view}-section`);
        if (targetSection) {
            targetSection.style.display = 'block';
        }

        this.currentView = view;
        this.loadViewData(view);
    }

    // ËºâÂÖ•Ë¶ñÂúñÊï∏Êìö
    async loadViewData(view) {
        try {
            switch (view) {
                case 'dashboard':
                    await this.loadDashboardData();
                    break;
                case 'transactions':
                    await this.loadTransactions();
                    break;
                case 'users':
                    await this.loadUsers();
                    break;
                case 'payments':
                    await this.loadPaymentConfig();
                    break;
                case 'settings':
                    await this.loadSystemSettings();
                    break;
            }
        } catch (error) {
            console.error(`ËºâÂÖ•${view}Êï∏ÊìöÂ§±Êïó:`, error);
            this.showNotification('ËºâÂÖ•Êï∏ÊìöÂ§±Êïó', 'error');
        }
    }

    // ËºâÂÖ•ÂÑÄË°®ÊùøÊï∏Êìö
    async loadDashboardData() {
        try {
            const response = await this.apiCall('/admin/dashboard');
            if (response.success) {
                this.updateDashboardStats(response.data.stats);
                this.updateCharts(response.data.charts);
                this.updateRecentTransactions(response.data.recentTransactions);
            }
        } catch (error) {
            console.error('ËºâÂÖ•ÂÑÄË°®ÊùøÊï∏ÊìöÂ§±Êïó:', error);
        }
    }

    // Êõ¥Êñ∞ÂÑÄË°®ÊùøÁµ±Ë®à
    updateDashboardStats(stats) {
        const statCards = {
            'total-revenue': stats.totalRevenue,
            'total-transactions': stats.totalTransactions,
            'success-rate': `${stats.successRate}%`,
            'active-users': stats.activeUsers
        };

        Object.entries(statCards).forEach(([id, value]) => {
            const element = document.querySelector(`#${id}`);
            if (element) {
                this.animateNumber(element, value);
            }
        });
    }

    // Êï∏Â≠óÂãïÁï´
    animateNumber(element, targetValue) {
        const isPercentage = typeof targetValue === 'string' && targetValue.includes('%');
        const isCurrency = typeof targetValue === 'number';
        const numericValue = parseFloat(targetValue.toString().replace(/[^0-9.]/g, ''));
        
        let currentValue = 0;
        const increment = numericValue / 50;
        const timer = setInterval(() => {
            currentValue += increment;
            if (currentValue >= numericValue) {
                currentValue = numericValue;
                clearInterval(timer);
            }
            
            let displayValue = Math.floor(currentValue);
            if (isCurrency) {
                displayValue = new Intl.NumberFormat('zh-TW', {
                    style: 'currency',
                    currency: 'TWD',
                    minimumFractionDigits: 0
                }).format(displayValue);
            } else if (isPercentage) {
                displayValue = `${displayValue}%`;
            }
            
            element.textContent = displayValue;
        }, 20);
    }

    // ÂàùÂßãÂåñÂúñË°®
    initializeCharts() {
        // Êî∂ÂÖ•Ë∂®Âã¢Âúñ
        const revenueCtx = document.getElementById('revenueChart');
        if (revenueCtx) {
            this.charts.revenue = new Chart(revenueCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Êî∂ÂÖ•',
                        data: [],
                        borderColor: AdminConfig.CHART_COLORS.primary,
                        backgroundColor: AdminConfig.CHART_COLORS.primary + '20',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffffff'
                            }
                        }
                    },
                    scales: {
                        y: {
                            ticks: {
                                color: '#ffffff'
                            },
                            grid: {
                                color: '#ffffff20'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#ffffff'
                            },
                            grid: {
                                color: '#ffffff20'
                            }
                        }
                    }
                }
            });
        }

        // ÊîØ‰ªòÊñπÂºèÂàÜÂ∏ÉÂúñ
        const methodCtx = document.getElementById('methodChart');
        if (methodCtx) {
            this.charts.method = new Chart(methodCtx, {
                type: 'doughnut',
                data: {
                    labels: [],
                    datasets: [{
                        data: [],
                        backgroundColor: [
                            AdminConfig.CHART_COLORS.primary,
                            AdminConfig.CHART_COLORS.secondary,
                            AdminConfig.CHART_COLORS.success,
                            AdminConfig.CHART_COLORS.warning
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffffff'
                            }
                        }
                    }
                }
            });
        }
    }

    // Êõ¥Êñ∞ÂúñË°®
    updateCharts(chartData) {
        // Êõ¥Êñ∞Êî∂ÂÖ•Ë∂®Âã¢Âúñ
        if (this.charts.revenue && chartData.revenue) {
            this.charts.revenue.data.labels = chartData.revenue.labels;
            this.charts.revenue.data.datasets[0].data = chartData.revenue.data;
            this.charts.revenue.update();
        }

        // Êõ¥Êñ∞ÊîØ‰ªòÊñπÂºèÂàÜÂ∏ÉÂúñ
        if (this.charts.method && chartData.methods) {
            this.charts.method.data.labels = chartData.methods.labels;
            this.charts.method.data.datasets[0].data = chartData.methods.data;
            this.charts.method.update();
        }
    }

    // Êõ¥Êñ∞ÊúÄËøë‰∫§Êòì
    updateRecentTransactions(transactions) {
        const container = document.querySelector('.recent-transactions-list');
        if (!container) return;

        container.innerHTML = transactions.map(transaction => `
            <div class="transaction-item" data-id="${transaction.id}">
                <div class="transaction-info">
                    <div class="transaction-id">#${transaction.id}</div>
                    <div class="transaction-user">${transaction.user}</div>
                    <div class="transaction-amount">${this.formatAmount(transaction.amount)}</div>
                    <div class="transaction-method">${transaction.method}</div>
                    <div class="transaction-status status-${transaction.status}">
                        ${this.getStatusText(transaction.status)}
                    </div>
                    <div class="transaction-time">${this.formatDate(transaction.created_at)}</div>
                </div>
                <div class="transaction-actions">
                    <button class="btn-sm" onclick="adminDashboard.viewTransaction('${transaction.id}')">
                        <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn-sm" onclick="adminDashboard.editTransaction('${transaction.id}')">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
            </div>
        `).join('');
    }

    // ËºâÂÖ•‰∫§ÊòìÂàóË°®
    async loadTransactions() {
        try {
            const params = new URLSearchParams({
                page: this.filters.page,
                pageSize: this.filters.pageSize,
                status: this.filters.status,
                method: this.filters.method,
                dateRange: this.filters.dateRange
            });

            const response = await this.apiCall(`/admin/transactions?${params}`);
            if (response.success) {
                this.updateTransactionTable(response.data.transactions);
                this.updatePagination(response.data.pagination);
            }
        } catch (error) {
            console.error('ËºâÂÖ•‰∫§ÊòìÂàóË°®Â§±Êïó:', error);
        }
    }

    // Êõ¥Êñ∞‰∫§ÊòìË°®Ê†º
    updateTransactionTable(transactions) {
        const tbody = document.querySelector('#transactions-table tbody');
        if (!tbody) return;

        tbody.innerHTML = transactions.map(transaction => `
            <tr data-id="${transaction.id}">
                <td>
                    <input type="checkbox" class="batch-checkbox" value="${transaction.id}">
                </td>
                <td>#${transaction.id}</td>
                <td>${transaction.user}</td>
                <td>${this.formatAmount(transaction.amount)}</td>
                <td>${transaction.method}</td>
                <td>
                    <span class="status-badge status-${transaction.status}">
                        ${this.getStatusText(transaction.status)}
                    </span>
                </td>
                <td>${this.formatDate(transaction.created_at)}</td>
                <td>
                    <div class="action-buttons">
                        <button class="btn-sm btn-primary" onclick="adminDashboard.viewTransaction('${transaction.id}')">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn-sm btn-secondary" onclick="adminDashboard.editTransaction('${transaction.id}')">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-sm btn-danger" onclick="adminDashboard.deleteTransaction('${transaction.id}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </td>
            </tr>
        `).join('');
    }

    // Êõ¥Êñ∞ÂàÜÈ†Å
    updatePagination(pagination) {
        const container = document.querySelector('.pagination');
        if (!container) return;

        const { currentPage, totalPages, totalItems } = pagination;
        
        container.innerHTML = `
            <div class="pagination-info">
                È°ØÁ§∫Á¨¨ ${(currentPage - 1) * this.filters.pageSize + 1} - 
                ${Math.min(currentPage * this.filters.pageSize, totalItems)} È†ÖÔºå
                ÂÖ± ${totalItems} È†Ö
            </div>
            <div class="pagination-controls">
                <button class="btn-sm" ${currentPage <= 1 ? 'disabled' : ''} 
                        onclick="adminDashboard.changePage(${currentPage - 1})">
                    <i class="fas fa-chevron-left"></i>
                </button>
                ${this.generatePageNumbers(currentPage, totalPages)}
                <button class="btn-sm" ${currentPage >= totalPages ? 'disabled' : ''} 
                        onclick="adminDashboard.changePage(${currentPage + 1})">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        `;
    }

    // ÁîüÊàêÈ†ÅÁ¢º
    generatePageNumbers(currentPage, totalPages) {
        const pages = [];
        const maxVisible = 5;
        
        let start = Math.max(1, currentPage - Math.floor(maxVisible / 2));
        let end = Math.min(totalPages, start + maxVisible - 1);
        
        if (end - start + 1 < maxVisible) {
            start = Math.max(1, end - maxVisible + 1);
        }
        
        for (let i = start; i <= end; i++) {
            pages.push(`
                <button class="btn-sm ${i === currentPage ? 'active' : ''}" 
                        onclick="adminDashboard.changePage(${i})">
                    ${i}
                </button>
            `);
        }
        
        return pages.join('');
    }

    // Êõ¥ÊîπÈ†ÅÈù¢
    changePage(page) {
        this.filters.page = page;
        this.loadTransactions();
    }

    // Êõ¥Êñ∞ÈÅéÊøæÂô®
    updateFilter(name, value) {
        this.filters[name] = value;
        this.filters.page = 1; // ÈáçÁΩÆÂà∞Á¨¨‰∏ÄÈ†Å
        this.refreshCurrentView();
    }

    // Âü∑Ë°åÊêúÁ¥¢
    performSearch(query) {
        this.filters.search = query;
        this.filters.page = 1;
        this.refreshCurrentView();
    }

    // Âà∑Êñ∞Áï∂ÂâçË¶ñÂúñ
    refreshCurrentView() {
        this.loadViewData(this.currentView);
    }

    // ÈñãÂßãËá™ÂãïÂà∑Êñ∞
    startAutoRefresh() {
        this.refreshTimer = setInterval(() => {
            if (document.visibilityState === 'visible') {
                this.refreshCurrentView();
            }
        }, AdminConfig.REFRESH_INTERVAL);
    }

    // ÂÅúÊ≠¢Ëá™ÂãïÂà∑Êñ∞
    stopAutoRefresh() {
        if (this.refreshTimer) {
            clearInterval(this.refreshTimer);
            this.refreshTimer = null;
        }
    }

    // Êü•Áúã‰∫§ÊòìË©≥ÊÉÖ
    async viewTransaction(id) {
        try {
            const response = await this.apiCall(`/admin/transactions/${id}`);
            if (response.success) {
                this.showTransactionModal(response.data);
            }
        } catch (error) {
            console.error('ËºâÂÖ•‰∫§ÊòìË©≥ÊÉÖÂ§±Êïó:', error);
            this.showNotification('ËºâÂÖ•‰∫§ÊòìË©≥ÊÉÖÂ§±Êïó', 'error');
        }
    }

    // È°ØÁ§∫‰∫§ÊòìÊ®°ÊÖãÊ°Ü
    showTransactionModal(transaction) {
        const modal = document.querySelector('#transaction-modal');
        if (!modal) return;

        const content = modal.querySelector('.modal-content');
        content.innerHTML = `
            <div class="modal-header">
                <h3>‰∫§ÊòìË©≥ÊÉÖ #${transaction.id}</h3>
                <button class="modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="transaction-details">
                    <div class="detail-group">
                        <label>‰∫§ÊòìID</label>
                        <span>${transaction.id}</span>
                    </div>
                    <div class="detail-group">
                        <label>Áî®Êà∂</label>
                        <span>${transaction.user}</span>
                    </div>
                    <div class="detail-group">
                        <label>ÈáëÈ°ç</label>
                        <span>${this.formatAmount(transaction.amount)}</span>
                    </div>
                    <div class="detail-group">
                        <label>ÊîØ‰ªòÊñπÂºè</label>
                        <span>${transaction.method}</span>
                    </div>
                    <div class="detail-group">
                        <label>ÁãÄÊÖã</label>
                        <span class="status-badge status-${transaction.status}">
                            ${this.getStatusText(transaction.status)}
                        </span>
                    </div>
                    <div class="detail-group">
                        <label>ÂâµÂª∫ÊôÇÈñì</label>
                        <span>${this.formatDate(transaction.created_at)}</span>
                    </div>
                    <div class="detail-group">
                        <label>Êõ¥Êñ∞ÊôÇÈñì</label>
                        <span>${this.formatDate(transaction.updated_at)}</span>
                    </div>
                    ${transaction.notes ? `
                        <div class="detail-group">
                            <label>ÂÇôË®ª</label>
                            <span>${transaction.notes}</span>
                        </div>
                    ` : ''}
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary modal-close">ÈóúÈñâ</button>
                <button class="btn btn-primary" onclick="adminDashboard.editTransaction('${transaction.id}')">
                    Á∑®ËºØ
                </button>
            </div>
        `;

        modal.style.display = 'flex';
    }

    // ÈóúÈñâÊ®°ÊÖãÊ°Ü
    closeModal() {
        document.querySelectorAll('.modal').forEach(modal => {
            modal.style.display = 'none';
        });
    }

    // Â∞éÂá∫Êï∏Êìö
    async exportData(format) {
        try {
            const params = new URLSearchParams({
                format,
                ...this.filters
            });

            const response = await fetch(`/admin/export?${params}`, {
                headers: {
                    'Authorization': `Bearer ${localStorage.getItem('token')}`
                }
            });

            if (response.ok) {
                const blob = await response.blob();
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `transactions_${Date.now()}.${format}`;
                a.click();
                window.URL.revokeObjectURL(url);
                
                this.showNotification('Â∞éÂá∫ÊàêÂäü', 'success');
            } else {
                throw new Error('Â∞éÂá∫Â§±Êïó');
            }
        } catch (error) {
            console.error('Â∞éÂá∫Êï∏ÊìöÂ§±Êïó:', error);
            this.showNotification('Â∞éÂá∫Â§±Êïó', 'error');
        }
    }

    // ËôïÁêÜ‰∫§ÊòìÊõ¥Êñ∞
    handleTransactionUpdate(data) {
        // Êõ¥Êñ∞Ë°®Ê†º‰∏≠ÁöÑ‰∫§ÊòìÈ†ÖÁõÆ
        const row = document.querySelector(`tr[data-id="${data.id}"]`);
        if (row) {
            const statusCell = row.querySelector('.status-badge');
            if (statusCell) {
                statusCell.className = `status-badge status-${data.status}`;
                statusCell.textContent = this.getStatusText(data.status);
            }
        }

        // Êõ¥Êñ∞Áµ±Ë®àÊï∏Êìö
        this.loadDashboardData();
    }

    // ËôïÁêÜÁ≥ªÁµ±ÈÄöÁü•
    handleSystemNotification(data) {
        this.showNotification(data.message, data.type || 'info');
    }

    // È°ØÁ§∫ÈÄöÁü•
    showNotification(message, type = 'info') {
        if (window.JyMainApp && window.JyMainApp.app()) {
            window.JyMainApp.app().showNotification(message, type);
        }
    }

    // APIË™øÁî®
    async apiCall(endpoint, method = 'GET', data = null) {
        const options = {
            method,
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${localStorage.getItem('token')}`
            }
        };

        if (data && method !== 'GET') {
            options.body = JSON.stringify(data);
        }

        const response = await fetch(endpoint, options);
        
        if (!response.ok) {
            const error = await response.json();
            throw new Error(error.message || 'Ë´ãÊ±ÇÂ§±Êïó');
        }

        return await response.json();
    }

    // Â∑•ÂÖ∑ÊñπÊ≥ï
    formatAmount(amount) {
        return new Intl.NumberFormat('zh-TW', {
            style: 'currency',
            currency: 'TWD',
            minimumFractionDigits: 0
        }).format(amount);
    }

    formatDate(dateString) {
        const date = new Date(dateString);
        return new Intl.DateTimeFormat('zh-TW', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit',
            hour: '2-digit',
            minute: '2-digit'
        }).format(date);
    }

    getStatusText(status) {
        const statusTexts = {
            'pending': 'ÂæÖËôïÁêÜ',
            'processing': 'ËôïÁêÜ‰∏≠',
            'completed': 'Â∑≤ÂÆåÊàê',
            'failed': 'Â§±Êïó',
            'expired': 'Â∑≤ÈÅéÊúü',
            'cancelled': 'Â∑≤ÂèñÊ∂à'
        };
        return statusTexts[status] || 'Êú™Áü•';
    }

    debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }
}

// ÁÆ°ÁêÜÂæåÂè∞Â∑•ÂÖ∑ÂáΩÊï∏
const AdminUtils = {
    // Ê†ºÂºèÂåñÊñá‰ª∂Â§ßÂ∞è
    formatFileSize(bytes) {
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        if (bytes === 0) return '0 Bytes';
        const i = Math.floor(Math.log(bytes) / Math.log(1024));
        return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + ' ' + sizes[i];
    },

    // ÁîüÊàêÈö®Ê©üÈ°èËâ≤
    generateRandomColor() {
        return '#' + Math.floor(Math.random() * 16777215).toString(16);
    },

    // È©óË≠âÈõªÂ≠êÈÉµ‰ª∂
    validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
    },

    // Ë§áË£ΩÂà∞Ââ™Ë≤ºÊùø
    async copyToClipboard(text) {
        try {
            await navigator.clipboard.writeText(text);
            return true;
        } catch (err) {
            console.error('Ë§áË£ΩÂ§±Êïó:', err);
            return false;
        }
    }
};

// ÂàùÂßãÂåñÁÆ°ÁêÜÂæåÂè∞
let adminDashboard;
document.addEventListener('DOMContentLoaded', () => {
    // Ê™¢Êü•ÊòØÂê¶ÁÇ∫ÁÆ°ÁêÜÂì°È†ÅÈù¢
    if (window.location.pathname.includes('admin')) {
        adminDashboard = new AdminDashboard();
    }
});

// Â∞éÂá∫ÂÖ®Â±ÄÂ∞çË±°
window.JyAdmin = {
    dashboard: () => adminDashboard,
    utils: AdminUtils,
    config: AdminConfig
};

console.log('üéõÔ∏è ÁÆ°ÁêÜÂæåÂè∞Ê®°ÁµÑÂ∑≤ËºâÂÖ•');